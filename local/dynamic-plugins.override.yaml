# Example dynamic plugin override config.
# Copy to dynamic-plugins.override.yaml to activate local plugins.

includes:
  - dynamic-plugins.default.yaml

# # Below you can add custom dynamic plugins, including local ones.

plugins:
  # MTA Frontend Plugin (from published container image)
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/backstage-community-backstage-plugin-mta-frontend:next__0.4.0!backstage-community-backstage-plugin-mta-frontend
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          "backstage-community.backstage-plugin-mta-frontend":
            entityTabs:
              - path: /mta
                title: MTA
                mountPoint: entity.page.mta
            mountPoints:
              - mountPoint: entity.page.mta/cards
                importName: EntityMTAContent
                config:
                  layout:
                    gridColumn: "1 / -1"
                    width: "100%"
                  if:
                    allOf:
                      - isKind: component
                      - isType: service

  # MTA Backend Plugin (custom image with embedded migrations - now public)
  - package: oci://quay.io/ibolton/backstage-plugin-mta-backend:v0.4.0-embedded-migrations!backstage-community-backstage-plugin-mta-backend
    disabled: false

  # MTA Scaffolder Action Plugin (from published container image)
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/backstage-community-backstage-plugin-scaffolder-backend-module-mta:next__0.5.0!backstage-community-backstage-plugin-scaffolder-backend-module-mta
    disabled: false

  # MTA Entity Provider - for catalog integration (from published container image)
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/backstage-community-backstage-plugin-catalog-backend-module-mta-entity-provider:next__0.4.0!backstage-community-backstage-plugin-catalog-backend-module-mta-entity-provider
    disabled: false
# # EXAMPLES:
# plugins:
# Functioning example using Tech Radar, uncomment to use
#Tech Radar frontend plugin
# - package: ./dynamic-plugins/dist/backstage-community-plugin-tech-radar
#   disabled: false

# Tech Radar backend plugin. Required if you want to customize the tech radar URL
# (see the `techRadar.url` app-config property).
# - package: ./dynamic-plugins/dist/backstage-community-plugin-tech-radar-backend-dynamic
#   disabled: false

# # loading plugin from host directory
#   - package: ./local-plugins/todo
#     disabled: false
#     pluginConfig:
#       dynamicPlugins:
#         frontend:
#           backstage-community.plugin-todo:
#             mountPoints:
#               - mountPoint: entity.page.todo/cards
#                 importName: EntityTodoContent
#             entityTabs:
#               - path: /todo
#                 title: Todo
#                 mountPoint: entity.page.todo

# # loading image from container image
#   - package: oci://docker.io/tomaskral/simple-chat:v0.0.1!internal-backstage-plugin-simple-chat
#     disabled: false
#     pluginConfig:
#       dynamicPlugins:
#         frontend:
#             internal.backstage-plugin-simple-chat:
#               appIcons:
#                 - name: chatIcon
#                   importName: ChatIcon
#               dynamicRoutes:
#                 - path: /simple-chat
#                   importName: SimpleChatPage
#                   menuItem:
#                     text: 'Simple Chat'
#                     icon: chatIcon

# # loading image from tarball URL
#   - disabled: false
#     package: >-
#         https://github.com/redhat-developer/rhdh-plugin-export-backstage-community-plugins/releases/download/v1.2.0/backstage-community-plugin-tech-insights-dynamic-0.3.28.tgz
#     integrity: sha512-cNHXSwPa5fOi2BcNVSe7tfdLyM0JY988CE5t+P9p/XlboP1QpQbMcLBmqPrlXZdpedAyp81Zz3yPQYGnPuy9ww==
#     pluginConfig:
#       dynamicPlugins:
#         techInsights:
#           factRetrievers:
#             entityOwnershipFactRetriever:
#               cadence: '*/15 * * * *'
#               lifecycle: { timeToLive: { weeks: 2 } }
#             entityMetadataFactRetriever:
#               cadence: '*/15 * * * *'
#               lifecycle: { timeToLive: { weeks: 2 } }
#             techdocsFactRetriever:
#               cadence: '*/15 * * * *'
#               lifecycle: { timeToLive: { weeks: 2 } }
#             apiDefinitionFactRetriever:
#               cadence: '*/15 * * * *'
#       lifecycle: { timeToLive: { weeks: 2 } }

# # loading plugin from directory inside the RHDH container
#   - package: ./dynamic-plugins/dist/backstage-community-plugin-rbac
#     disabled: true
#     pluginConfig:
#       dynamicPlugins:
#         frontend:
#           backstage-community.plugin-rbac:
#             mountPoints:
#               - mountPoint: admin.page.rbac/cards
#                 module: RbacPlugin
#                 importName: RbacPage
#                 config:
#                   layout:
#                     gridColumn: "1 / -1"
#                     width: 100vw
#                   props:
#                     useHeader: false
#             dynamicRoutes:
#               - path: /admin/rbac
#                 module: RbacPlugin
#                 importName: RbacPage
